{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "Donut chart: total bike parking capacity by faculty",
    "width": 420,
    "height": 420,
    "data": {
    "url": "bike-data-original.csv",
    "format": { "type": "csv" }
    },
    "transform": [
    {
        "calculate": "datum.access !== 'nil' ? 0 : datum.capacity == 'nil' ? 0 : toNumber(datum.capacity || 0)",
        "as": "cap_num"
    }
    ],
    "mark": { "type": "arc", "innerRadius": 110, "outerRadius": 150, "stroke": "#fff" },
    "encoding": {
    "theta": { "aggregate": "sum", "field": "cap_num", "type": "quantitative", "title": "Total capacity" },
    "color": {
    "field": "group",
    "type": "nominal",
    "title": "Group or Faculty",
    "scale": { "domain": ["BIOMEDICAL_IMAGING",
                        "BUILDINGS_AND_PROPERTY",
                        "CAMPUS_CENTRE",
                        "EXT_151_WELLINGTON_RD",
                        "EXT_211_WELLINGTON_RD",
                        "EXT_264_FERNTREE_GULLY_RD",
                        "FACULTY_OF_ART_ARTS_LAW",
                        "FACULTY_OF_EDUCATION",
                        "FACULTY_OF_ENGINEERING_IT",
                        "FACULTY_OF_MEDICINE_NURSING_AND_HEALTH_SCIENCES",
                        "FACULTY_OF_SCIENCE",
                        "JOCK_MARSHALL_RESERVE",
                        "LIBRARY_HARGRAVE_ANDREW",
                        "MONASH_COLLEGE",
                        "MONASH_SPORT",
                        "MONASH_SUSTAINABLE_DEVELOPMENT_INSTITUTE",
                        "PARKING_N1_W1",
                        "PARKING_SE1_SE2_SE3_SE4",
                        "RESIDENTIAL_SERVICES",
                        "SOUTH_EAST_FLATS",
                        "UNIVERSITY_BUSINESS_PARK"], 
    "range": ["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928",
"#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"] }
    },
    "order": { "aggregate": "sum", "field": "cap_num", "sort": "descending" },
    "tooltip": [
    { "field": "group", "type": "nominal", "title": "Group or Faculty" },
    { "aggregate": "sum", "field": "cap_num", "type": "quantitative", "title": "Total capacity", "format": ",d" }
    ]
    },
    "title": { "text": "Parking capacity by faculty", "fontWeight": "bold" }
    }